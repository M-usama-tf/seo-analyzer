(()=>{var e={};e.id=354,e.ids=[354],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9859:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>S,routeModule:()=>h,serverHooks:()=>$,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{POST:()=>g});var o=t(2706),n=t(8203),u=t(5994),a=t(9187);let i=require("child_process"),l=require("fs");var p=t.n(l),c=t(3873),d=t.n(c);async function g(e){let{url:r}=await e.json();if(!r)return a.NextResponse.json({message:"URL is required"},{status:400});let t=r.replace(/[^a-zA-Z0-9.-]/g,"_"),s=new Date().toISOString().replace(/[:.]/g,"-"),o=`speed-report-${t}-${s}.html`,n=`seo-report-${t}-${s}.html`,u=`full-seo-report-${t}-${s}.html`,l=d().resolve("./public");if(!p().existsSync(l))try{p().mkdirSync(l,{recursive:!0})}catch(e){return console.error("Failed to create output directory",e),a.NextResponse.json({message:"Failed to create output directory"},{status:500})}let c={maxBuffer:0x1e00000};(0,i.exec)(`lighthouse ${r} --output-path=${d().join(l,o)} --output html  --chrome-flags="--headless" --screenEmulation.disabled --throttling-method=provided --no-emulatedUserAgent`,c,(e,t,s)=>{if(e)return console.error(`exec error (Speed): ${e}`),a.NextResponse.json({message:`Error executing Speed Lighthouse: ${e.message}`},{status:500});t&&console.log(`stdout (Speed): ${t}`),s&&console.warn(`stderr (Speed warning): ${s}`),(0,i.exec)(`lighthouse ${r} --output-path=${d().join(l,n)} --output html --only-categories=seo --chrome-flags="--headless" --screenEmulation.disabled --throttling-method=provided --no-emulatedUserAgent`,c,(e,t,s)=>{if(e)return console.error(`exec error (SEO): ${e}`),a.NextResponse.json({message:`Error executing SEO Lighthouse: ${e.message}`},{status:500});t&&console.log(`stdout (SEO): ${t}`),s&&console.warn(`stderr (SEO warning): ${s}`),(0,i.exec)(`lighthouse ${r} --output-path=${d().join(l,u)} --output html --chrome-flags="--headless" --screenEmulation.disabled --throttling-method=provided --no-emulatedUserAgent`,c,(e,r,t)=>{if(e)return console.error(`exec error (Full SEO): ${e}`),a.NextResponse.json({message:`Error executing Full SEO Lighthouse: ${e.message}`},{status:500});r&&console.log(`stdout (Full SEO): ${r}`),t&&console.warn(`stderr (Full SEO warning): ${t}`);let s={speedReportUrl:`/${o}`,seoReportUrl:`/${n}`,fullSeoReportUrl:`/${u}`};return a.NextResponse.json(s,{status:200})})})})}let h=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/generate-report/route",pathname:"/api/generate-report",filename:"route",bundlePath:"app/api/generate-report/route"},resolvedPagePath:"/Users/themacstore/Documents/codes/Techfrontiers/seo/src/app/api/generate-report/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:x,serverHooks:$}=h;function S(){return(0,u.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:x})}},6487:()=>{},8335:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[989,452],()=>t(9859));module.exports=s})();